{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46804414-b7542e140c58663107171b647';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page, perPage) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return {\n      hits: response.data.hits,\n      totalHits: response.data.totalHits\n    };\n  } catch (error) {\n    throw new Error(`HTTP error! status: ${error.response.status}`);\n  }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport function renderGallery(images, append = false) {\n  const gallery = document.getElementById('gallery');\n  if (!append) gallery.innerHTML = '';\n\n  const markup = images.map(image => `\n    <div class=\"photo-card\">\n      <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"info\">\n        <div class=\"info-item\">\n          <b>Likes</b>\n          <p>${image.likes}</p>\n        </div>\n        <div class=\"info-item\">\n          <b>Views</b>\n          <p>${image.views}</p>\n        </div>\n        <div class=\"info-item\">\n          <b>Comments</b>\n          <p>${image.comments}</p>\n        </div>\n        <div class=\"info-item\">\n          <b>Downloads</b>\n          <p>${image.downloads}</p>\n        </div>\n      </div>\n    </div>\n  `).join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}","import { fetchImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\nimport iziToast from 'izitoast';\n\nconst searchForm = document.getElementById('search-form');\nconst loadMoreButton = document.getElementById('load-more-button');\nconst loader = document.getElementById('loader');\nconst searchInput = document.getElementById('search-input');\nlet currentPage = 1;\nconst perPage = 15;\nlet currentQuery = '';\n\nsearchInput.addEventListener('focus', () => {\n  searchInput.value = '';\n});\n\nsearchForm.addEventListener('submit', onSearchFormSubmit);\nloadMoreButton.addEventListener('click', onLoadMoreButtonClick);\n\nasync function onSearchFormSubmit(event) {\n  event.preventDefault();\n  currentQuery = searchInput.value.trim();\n  if (currentQuery === '') {\n    showToast('Please enter a search query', 'info');\n    return;\n  }\n  currentPage = 1;\n  await fetchAndRenderImages();\n}\n\nasync function onLoadMoreButtonClick() {\n  currentPage += 1;\n  await fetchAndRenderImages(true);\n}\n\nasync function fetchAndRenderImages(append = false) {\n  loader.style.display = 'block';\n  try {\n    const { hits, totalHits } = await fetchImages(currentQuery, currentPage, perPage);\n    renderGallery(hits, append);\n    loader.style.display = 'none';\n\n    if (hits.length < perPage || currentPage * perPage >= totalHits) {\n      loadMoreButton.style.display = 'none';\n    } else {\n      loadMoreButton.style.display = 'block';\n    }\n\n    if (currentPage === 1 && hits.length > 0) {\n      showToast(`Hooray! We found ${totalHits} images.`, 'success');\n    }\n\n    if (hits.length === 0) {\n      showToast('Sorry, there are no images matching your search query. Please try again.', 'info');\n    }\n\n  } catch (error) {\n    loader.style.display = 'none';\n    showToast(`Error fetching images: ${error.message}`, 'error');\n  }\n}\n\nfunction showToast(message, type) {\n  iziToast[type]({\n    title: message,\n    position: 'topRight'\n  });\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","response","axios","error","lightbox","renderGallery","images","append","gallery","markup","image","SimpleLightbox","searchForm","loadMoreButton","loader","searchInput","currentPage","currentQuery","onSearchFormSubmit","onLoadMoreButtonClick","event","showToast","fetchAndRenderImages","hits","totalHits","message","type","iziToast"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAMC,EAAS,CACtD,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAIN,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACX,CACP,CAAK,EACD,MAAO,CACL,KAAMC,EAAS,KAAK,KACpB,UAAWA,EAAS,KAAK,SAC/B,CACG,OAAQE,EAAO,CACd,MAAM,IAAI,MAAM,uBAAuBA,EAAM,SAAS,MAAM,EAAE,CAC/D,CACH,CCtBA,IAAIC,EAEG,SAASC,EAAcC,EAAQC,EAAS,GAAO,CACpD,MAAMC,EAAU,SAAS,eAAe,SAAS,EAC5CD,IAAQC,EAAQ,UAAY,IAEjC,MAAMC,EAASH,EAAO,IAAII,GAAS;AAAA;AAAA,iBAEpBA,EAAM,aAAa;AAAA,oBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,eAK3CA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,eAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,eAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,eAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,GAI3B,EAAE,KAAK,EAAE,EAEVF,EAAQ,mBAAmB,YAAaC,CAAM,EAEzCL,EAMHA,EAAS,QAAO,EALhBA,EAAW,IAAIO,EAAe,aAAc,CAC1C,aAAc,MACd,aAAc,GACpB,CAAK,CAIL,CCzCA,MAAMC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAiB,SAAS,eAAe,kBAAkB,EAC3DC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAc,SAAS,eAAe,cAAc,EAC1D,IAAIC,EAAc,EAClB,MAAMhB,EAAU,GAChB,IAAIiB,EAAe,GAEnBF,EAAY,iBAAiB,QAAS,IAAM,CAC1CA,EAAY,MAAQ,EACtB,CAAC,EAEDH,EAAW,iBAAiB,SAAUM,CAAkB,EACxDL,EAAe,iBAAiB,QAASM,CAAqB,EAE9D,eAAeD,EAAmBE,EAAO,CAGvC,GAFAA,EAAM,eAAc,EACpBH,EAAeF,EAAY,MAAM,OAC7BE,IAAiB,GAAI,CACvBI,EAAU,8BAA+B,MAAM,EAC/C,MACD,CACDL,EAAc,EACd,MAAMM,EAAoB,CAC5B,CAEA,eAAeH,GAAwB,CACrCH,GAAe,EACf,MAAMM,EAAqB,EAAI,CACjC,CAEA,eAAeA,EAAqBf,EAAS,GAAO,CAClDO,EAAO,MAAM,QAAU,QACvB,GAAI,CACF,KAAM,CAAE,KAAAS,EAAM,UAAAC,GAAc,MAAM3B,EAAYoB,EAAcD,EAAahB,CAAO,EAChFK,EAAckB,EAAMhB,CAAM,EAC1BO,EAAO,MAAM,QAAU,OAEnBS,EAAK,OAASvB,GAAWgB,EAAchB,GAAWwB,EACpDX,EAAe,MAAM,QAAU,OAE/BA,EAAe,MAAM,QAAU,QAG7BG,IAAgB,GAAKO,EAAK,OAAS,GACrCF,EAAU,oBAAoBG,CAAS,WAAY,SAAS,EAG1DD,EAAK,SAAW,GAClBF,EAAU,2EAA4E,MAAM,CAG/F,OAAQlB,EAAO,CACdW,EAAO,MAAM,QAAU,OACvBO,EAAU,0BAA0BlB,EAAM,OAAO,GAAI,OAAO,CAC7D,CACH,CAEA,SAASkB,EAAUI,EAASC,EAAM,CAChCC,EAASD,CAAI,EAAE,CACb,MAAOD,EACP,SAAU,UACd,CAAG,CACH"}