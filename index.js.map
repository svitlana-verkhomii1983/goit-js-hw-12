{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46804414-b7542e140c58663107171b647';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page, perPage) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return {\n      hits: response.data.hits,\n      totalHits: response.data.totalHits\n    };\n  } catch (error) {\n    throw new Error(`HTTP error! status: ${error.response.status}`);\n  }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport function renderGallery(images, append = false) {\n  const gallery = document.getElementById('gallery');\n  if (!append) gallery.innerHTML = '';\n\n  images.forEach(image => {\n    const photoCard = document.createElement('div');\n    photoCard.className = 'photo-card';\n\n    const imgElement = document.createElement('img');\n    imgElement.src = image.webformatURL;\n    imgElement.alt = image.tags;\n    imgElement.loading = 'lazy';\n\n    const infoDiv = document.createElement('div');\n    infoDiv.className = 'info';\n\n    const likes = document.createElement('div');\n    likes.className = 'info-item';\n    likes.innerHTML = `<b>Likes</b><p>${image.likes}</p>`;\n\n    const views = document.createElement('div');\n    views.className = 'info-item';\n    views.innerHTML = `<b>Views</b><p>${image.views}</p>`;\n\n    const comments = document.createElement('div');\n    comments.className = 'info-item';\n    comments.innerHTML = `<b>Comments</b><p>${image.comments}</p>`;\n\n    const downloads = document.createElement('div');\n    downloads.className = 'info-item';\n    downloads.innerHTML = `<b>Downloads</b><p>${image.downloads}</p>`;\n\n    infoDiv.appendChild(likes);\n    infoDiv.appendChild(views);\n    infoDiv.appendChild(comments);\n    infoDiv.appendChild(downloads);\n\n    photoCard.appendChild(imgElement);\n    photoCard.appendChild(infoDiv);\n\n    gallery.appendChild(photoCard);\n  });\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a');\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  const gallery = document.getElementById('gallery');\n  gallery.innerHTML = '';\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, clearGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchForm = document.getElementById('search-form');\nconst loadMoreButton = document.getElementById('load-more-button');\nconst loader = document.getElementById('loader');\nconst searchInput = document.getElementById('search-input');\n\nlet currentPage = 1;\nconst perPage = 15;\nlet currentQuery = '';\nlet totalPages = 0;\n\nsearchInput.addEventListener('focus', () => {\n  searchInput.value = '';\n});\n\n\nfunction toggleLoader(show) {\n  loader.style.display = show ? 'block' : 'none';\n}\n\nsearchForm.addEventListener('submit', async event => {\n  event.preventDefault();\n  currentQuery = searchInput.value.trim();\n  if (currentQuery === '') return;\n\n  currentPage = 1;\n  clearGallery();\n  toggleLoader(true);\n\n  try {\n    const { hits, totalHits } = await fetchImages(currentQuery, currentPage, perPage);\n    toggleLoader(false);\n\n    if (totalHits === 0) {\n      iziToast.warning({\n        title: 'No Results',\n        message: 'Sorry, there are no images matching your search query. Please try again.',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    renderGallery(hits);\n    totalPages = Math.ceil(totalHits / perPage);\n\n    if (currentPage < totalPages) {\n      loadMoreButton.style.display = 'block';\n    } else {\n      loadMoreButton.style.display = 'none';\n    }\n\n    iziToast.success({\n      title: 'Success',\n      message: `Hooray! We found ${totalHits} images.`,\n      position: 'topRight',\n    });\n\n  } catch (error) {\n    toggleLoader(false);\n    iziToast.error({\n      title: 'Error',\n      message: `Failed to fetch images: ${error.message}`,\n      position: 'topRight',\n    });\n  }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n  currentPage += 1;\n  toggleLoader(true);\n\n  try {\n    const { hits } = await fetchImages(currentQuery, currentPage, perPage);\n    toggleLoader(false); //\n    renderGallery(hits, true);\n\n    // Smooth scroll\n    const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    if (currentPage >= totalPages) {\n      loadMoreButton.style.display = 'none';\n    }\n\n  } catch (error) {\n    toggleLoader(false);\n    iziToast.error({\n      title: 'Error',\n      message: `Failed to fetch images: ${error.message}`,\n      position: 'topRight',\n    });\n  }\n});"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","response","axios","error","lightbox","renderGallery","images","append","gallery","image","photoCard","imgElement","infoDiv","likes","views","comments","downloads","SimpleLightbox","clearGallery","searchForm","loadMoreButton","loader","searchInput","currentPage","currentQuery","totalPages","toggleLoader","show","event","hits","totalHits","iziToast","cardHeight"],"mappings":"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"}